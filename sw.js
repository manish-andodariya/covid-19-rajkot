"use strict"; const CACHE_NAME = "Covid-19", FILES_TO_CACHE = [ "./", "./index.html", "./animate.min.css", "./icon.png", "./jquery-3.5.0.min.js", "./main.js", "./materialize.min.css", "./materialize.min.js" ]; self.addEventListener("install", e => { console.log("[ServiceWorker] Install"), e.waitUntil(caches.open("Covid-19").then(e => (console.log("[ServiceWorker] Pre-caching offline page"), e.addAll(FILES_TO_CACHE)))), self.skipWaiting(); }), self.addEventListener("activate", e => { console.log("[ServiceWorker] Activate"), e.waitUntil(caches.keys().then(e => Promise.all(e.map(e => { if ("Covid-19" !== e) return console.log("[ServiceWorker] Removing old cache", e), caches.delete(e); })))), self.clients.claim(); }), self.addEventListener("fetch", e => { console.log("[ServiceWorker] Fetch", e.request.url), "navigate" === e.request.mode && e.respondWith(fetch(e.request).catch(() => caches.open("Covid-19").then(e => e.match("offline.html")))); });